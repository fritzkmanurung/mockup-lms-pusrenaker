<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilih Instansi | SIRENATA - Sistem Informasi Rencana Tenaga Kerja Nasional</title>
    <link rel="icon" type="image/png" href="../assets/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }

        /* Select2 custom styling */
        .select2-container--default .select2-selection--single {
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 0.5rem 0.75rem;
            height: auto;
        }

        .select2-container--default .select2-selection--single .select2-selection__rendered {
            color: #374151;
            line-height: normal;
            padding: 0;
        }

        .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: 100%;
        }

        .select2-dropdown {
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
        }

        .select2-container--default .select2-results__option--highlighted[aria-selected] {
            background-color: #6366f1;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Blurred Background Content -->
    <div class="blur-sm pointer-events-none" style="filter: blur(8px);">
        <!-- Navbar -->
        <nav class="fixed top-0 z-10 w-full bg-white border-b">
            <div class="px-3 py-3 lg:px-5">
                <div class="flex justify-between">
                    <div class="flex items-center">
                        <a href="./index.html" class="flex items-center ms-2">
                            <img src="../assets/logo.png" alt="SIRENATA Logo" class="h-8 w-auto">
                            <span class="text-lg font-semibold ms-2" style="color: #13416B;">SIRENATA</span>
                        </a>
                    </div>

                    <!-- Notification & User Section -->
                    <div class="flex items-center gap-2 sm:gap-4">
                        <!-- Notification Icon -->
                        <div class="relative">
                            <button class="p-2 rounded-lg hover:bg-gray-100 transition-colors relative"
                                data-dropdown-toggle="dropdown-notifications">
                                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                                    </path>
                                </svg>
                                <span class="absolute top-1 right-1 flex h-5 w-5 items-center justify-center">
                                    <span
                                        class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                                    <span
                                        class="relative inline-flex rounded-full h-5 w-5 bg-red-500 text-white text-xs items-center justify-center font-semibold">2</span>
                                </span>
                            </button>

                            <div class="hidden absolute right-0 top-full mt-2 bg-white border rounded-lg shadow-lg w-80 sm:w-96 z-50"
                                id="dropdown-notifications">
                                <div class="px-4 py-3 border-b bg-gradient-to-r from-indigo-50 to-purple-50">
                                    <div class="flex items-center justify-between">
                                        <h3 class="text-sm font-semibold text-gray-900">Notifikasi</h3>
                                        <span class="text-xs text-indigo-600 font-medium">2 baru</span>
                                    </div>
                                </div>
                                <div class="max-h-96 overflow-y-auto">
                                    <div
                                        class="px-4 py-3 hover:bg-gray-50 transition-colors border-b cursor-pointer group">
                                        <div class="flex gap-3">
                                            <div class="flex-shrink-0">
                                                <div
                                                    class="w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center">
                                                    <svg class="w-6 h-6 text-emerald-600" fill="none"
                                                        stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                            stroke-width="2"
                                                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <div class="flex items-start justify-between">
                                                    <p
                                                        class="text-sm font-semibold text-gray-900 group-hover:text-indigo-600">
                                                        Kursus Selesai</p>
                                                    <span
                                                        class="w-2 h-2 bg-indigo-600 rounded-full flex-shrink-0 ml-2"></span>
                                                </div>
                                                <p class="text-xs text-gray-600 mt-1 line-clamp-2">Selamat! Anda telah
                                                    menyelesaikan kursus 'Perencanaan Tenaga Kerja Mikro'</p>
                                                <p class="text-xs text-gray-400 mt-1">2 jam yang lalu</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div
                                        class="px-4 py-3 hover:bg-gray-50 transition-colors border-b cursor-pointer group">
                                        <div class="flex gap-3">
                                            <div class="flex-shrink-0">
                                                <div
                                                    class="w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center">
                                                    <svg class="w-6 h-6 text-amber-600" fill="none"
                                                        stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                            stroke-width="2"
                                                            d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z">
                                                        </path>
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <div class="flex items-start justify-between">
                                                    <p
                                                        class="text-sm font-semibold text-gray-900 group-hover:text-indigo-600">
                                                        Pengangkatan Ketua Tim</p>
                                                    <span
                                                        class="w-2 h-2 bg-indigo-600 rounded-full flex-shrink-0 ml-2"></span>
                                                </div>
                                                <p class="text-xs text-gray-600 mt-1 line-clamp-2">Admin Kab/Kota
                                                    mengangkat Anda menjadi Ketua Tim RTK</p>
                                                <p class="text-xs text-gray-400 mt-1">5 jam yang lalu</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="px-4 py-3 border-t bg-gray-50">
                                    <button
                                        class="text-xs text-indigo-600 hover:text-indigo-700 font-medium w-full text-center">Lihat
                                        Semua Notifikasi</button>
                                </div>
                            </div>
                        </div>

                        <!-- User Avatar -->
                        <button class="rounded-full p-0 overflow-hidden">
                            <img class="w-8 h-8 rounded-full"
                                src="https://ui-avatars.com/api/?name=Budi+Santoso&background=6366f1&color=fff"
                                alt="user">
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content (Blurred) -->
        <div class="p-4 mt-14">
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-white rounded-lg p-5 shadow-sm border-l-4 border-indigo-500">
                        <p class="text-gray-500 text-sm">Placeholder</p>
                        <h3 class="text-3xl font-bold text-gray-900">--</h3>
                    </div>
                    <div class="bg-white rounded-lg p-5 shadow-sm border-l-4 border-emerald-500">
                        <p class="text-gray-500 text-sm">Placeholder</p>
                        <h3 class="text-3xl font-bold text-gray-900">--</h3>
                    </div>
                    <div class="bg-white rounded-lg p-5 shadow-sm border-l-4 border-amber-500">
                        <p class="text-gray-500 text-sm">Placeholder</p>
                        <h3 class="text-3xl font-bold text-gray-900">--</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Card (Not Blurred) -->
    <div class="fixed inset-0 z-50 flex items-center justify-center p-4" style="background-color: rgba(0, 0, 0, 0.3);">
        <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <!-- Header -->
                <div class="text-center mb-8">
                    <div class="bg-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                        </svg>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900">Pilih Instansi Anda</h2>
                    <p class="text-gray-600 mt-2">Lengkapi informasi institusi untuk melanjutkan</p>
                </div>

                <!-- Form -->
                <form id="instansiForm" class="space-y-6">
                    <!-- Asal Instansi -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Asal Instansi <span class="text-red-500">*</span>
                        </label>
                        <div class="flex gap-3">
                            <label
                                class="flex-1 flex items-center justify-center px-3 py-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-colors">
                                <input type="radio" name="asalInstansi" value="pusat" class="mr-2">
                                <span class="font-medium text-sm">Pusat</span>
                            </label>
                            <label
                                class="flex-1 flex items-center justify-center px-3 py-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-colors">
                                <input type="radio" name="asalInstansi" value="provinsi" class="mr-2">
                                <span class="font-medium text-sm">Provinsi</span>
                            </label>
                            <label
                                class="flex-1 flex items-center justify-center px-3 py-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-colors">
                                <input type="radio" name="asalInstansi" value="kabkota" class="mr-2">
                                <span class="font-medium text-sm">Kab/Kota</span>
                            </label>
                        </div>
                    </div>

                    <!-- Kementerian (Show if Pusat) -->
                    <div id="kementerianSection" class="hidden">
                        <label for="kementerian" class="block text-sm font-medium text-gray-700 mb-2">
                            Kementerian/Lembaga <span class="text-red-500">*</span>
                        </label>
                        <select id="kementerian" class="w-full">
                            <option value="">Pilih Kementerian/Lembaga</option>
                        </select>
                    </div>

                    <!-- Provinsi (Show if Provinsi or Kab/Kota) -->
                    <div id="provinsiSection" class="hidden">
                        <label for="provinsi" class="block text-sm font-medium text-gray-700 mb-2">
                            Provinsi <span class="text-red-500">*</span>
                        </label>
                        <select id="provinsi" class="w-full">
                            <option value="">Pilih Provinsi</option>
                        </select>
                    </div>

                    <!-- Kab/Kota (Show only if Kab/Kota selected) -->
                    <div id="kabkotaSection" class="hidden">
                        <label for="kabkota" class="block text-sm font-medium text-gray-700 mb-2">
                            Kabupaten/Kota <span class="text-red-500">*</span>
                        </label>
                        <select id="kabkota" class="w-full">
                            <option value="">Pilih Kabupaten/Kota</option>
                        </select>
                    </div>

                    <!-- Instansi (Show for Provinsi and Kab/Kota) -->
                    <div id="instansiSection" class="hidden">
                        <label for="instansi" class="block text-sm font-medium text-gray-700 mb-2">
                            Instansi <span class="text-red-500">*</span>
                        </label>
                        <select id="instansi" class="w-full">
                            <option value="">Pilih Instansi</option>
                        </select>
                        <p class="mt-2 text-xs text-gray-500 italic">üí° Pilih Lainnya jika Instansi Anda tidak ada</p>
                    </div>

                    <!-- Custom Instansi Input (Show when "Lainnya" is selected) -->
                    <div id="customInstansiSection" class="hidden">
                        <label for="customInstansi" class="block text-sm font-medium text-gray-700 mb-2">
                            Nama Instansi <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="customInstansi" placeholder="Masukkan nama instansi"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        <div class="mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                            <p class="text-xs text-blue-800 font-medium mb-1">üìù Cara Penulisan yang Tepat:</p>
                            <ul class="text-xs text-blue-700 space-y-1 ml-4 list-disc">
                                <li>Gunakan huruf kapital pada awal setiap kata (Title Case)</li>
                                <li>Contoh: <span class="font-semibold">"Dinas Pendidikan dan Kebudayaan"</span></li>
                                <li>Hindari singkatan kecuali nama resmi menggunakannya</li>
                                <li>Pastikan ejaan sesuai dengan nama resmi instansi</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Unit Kerja -->
                    <div id="unitKerjaSection" class="hidden">
                        <label for="unitKerja" class="block text-sm font-medium text-gray-700 mb-2">
                            Unit Kerja <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="unitKerja" placeholder="Contoh: Bagian SDM"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    </div>

                    <!-- Submit Button -->
                    <button type="submit"
                        class="w-full bg-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-indigo-700 transition-colors flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                        Lanjutkan
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- jQuery (required for Select2) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Select2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script>
        // Data Kementerian/Lembaga
        const kementerianList = [
            "Kementerian Koordinator Bidang Infrastruktur dan Pengembangan Wilayah",
            "Kementerian Dalam Negeri",
            "Kementerian Luar Negeri",
            "Kementerian Pertahanan",
            "Kementerian Pekerjaan Umum",
            "Kementerian Perumahan dan Kawasan Permukiman",
            "Kementerian Perhubungan",
            "Kementerian Kelautan dan Perikanan",
            "Kementerian Perlindungan Pekerja Migran Indonesia",
            "Kementerian Imigrasi dan Pemasyarakatan",
            "Kementerian Keuangan",
            "Kementerian Pertanian",
            "Kementerian Koperasi",
            "Kementerian Usaha Kecil dan Menengah",
            "Kementerian Perdagangan",
            "Kementerian Lingkungan Hidup",
            "Kementerian Kehutanan",
            "Kementerian Agraria dan Tata Ruang/ Kepala Badan Pertahanan",
            "Kementerian Pariwisata",
            "Kementerian Ekonomi Kreatif/Kepala Badan Ekonomi Kreatif",
            "Kementerian Ketegakerjaan",
            "Kementerian Desa dan Pembangunan Daerah Tertingal",
            "Kementarian Komunikasi dan Digitalisasi",
            "Kementerian Energi dan Sumber Daya Tertinggal",
            "Kementerian Pendidikan Dasar dan Menengah",
            "Kementerian Pendidikan Tinggi, Sains dan Teknologi",
            "Kementerian Agama",
            "Kementerian Sosial",
            "Tentara Nasional Indonesia",
            "Kepolisian Republik Indonesia",
            "Badan Informasi Geospasial",
            "Badan Kemanan Laut",
            "Badan Karantina Indonesia",
            "Badan Narkotika Nasional",
            "Badan Pusat Statistik",
            "Badan Nasional Penanggulangan Bencana",
            "Badan Gizi Nasional",
            "Badan Pangan Nasional"
        ];

        // Data Provinsi
        const provinsiList = [
            "Aceh", "Sumatera Utara", "Sumatera Barat", "Riau", "Jambi", "Sumatera Selatan",
            "Bengkulu", "Lampung", "Kepulauan Bangka Belitung", "Kepulauan Riau", "DKI Jakarta",
            "Jawa Barat", "Jawa Tengah", "DI Yogyakarta", "Jawa Timur", "Banten", "Bali",
            "Nusa Tenggara Barat", "Nusa Tenggara Timur", "Kalimantan Barat", "Kalimantan Tengah",
            "Kalimantan Selatan", "Kalimantan Timur", "Kalimantan Utara", "Sulawesi Utara",
            "Sulawesi Tengah", "Sulawesi Selatan", "Sulawesi Tenggara", "Gorontalo", "Sulawesi Barat",
            "Maluku", "Maluku Utara", "Papua", "Papua Barat", "Papua Tengah", "Papua Pegunungan",
            "Papua Selatan", "Papua Barat Daya"
        ];

        // Populate Kementerian
        kementerianList.forEach(k => {
            $('#kementerian').append(new Option(k, k));
        });

        // Populate Provinsi
        provinsiList.forEach(p => {
            $('#provinsi').append(new Option(p, p));
        });

        // Initialize Select2
        $('#kementerian, #provinsi, #kabkota, #instansi').select2({
            placeholder: function () {
                return $(this).find('option:first').text();
            },
            allowClear: true,
            width: '100%'
        });

        // Handle Asal Instansi Selection
        $('input[name="asalInstansi"]').on('change', function () {
            const value = $(this).val();

            // Reset all sections
            $('#kementerianSection, #provinsiSection, #kabkotaSection, #instansiSection, #customInstansiSection, #unitKerjaSection').addClass('hidden');
            $('#kementerian, #provinsi, #kabkota, #instansi, #customInstansi, #unitKerja').val('').trigger('change');

            if (value === 'pusat') {
                $('#kementerianSection, #unitKerjaSection').removeClass('hidden');
            } else if (value === 'provinsi') {
                $('#provinsiSection').removeClass('hidden');
            } else if (value === 'kabkota') {
                $('#provinsiSection').removeClass('hidden');
            }
        });

        // Handle Provinsi Selection
        $('#provinsi').on('change', function () {
            const provinsi = $(this).val();
            const asalInstansi = $('input[name="asalInstansi"]:checked').val();

            if (provinsi) {
                if (asalInstansi === 'kabkota') {
                    // Populate dummy Kab/Kota data
                    $('#kabkota').empty().append(new Option('Pilih Kabupaten/Kota', ''));
                    const dummyKabKota = [
                        'Kabupaten ' + provinsi,
                        'Kota ' + provinsi,
                        'Kabupaten Utara',
                        'Kabupaten Selatan'
                    ];
                    dummyKabKota.forEach(k => {
                        $('#kabkota').append(new Option(k, k));
                    });
                    $('#kabkotaSection').removeClass('hidden');
                    $('#instansiSection, #customInstansiSection, #unitKerjaSection').addClass('hidden');
                } else if (asalInstansi === 'provinsi') {
                    // For provinsi, show instansi directly
                    populateInstansi();
                    $('#instansiSection').removeClass('hidden');
                    $('#kabkotaSection, #customInstansiSection').addClass('hidden');
                }
            }
        });

        // Function to populate Instansi dropdown
        function populateInstansi() {
            $('#instansi').empty().append(new Option('Pilih Instansi', ''));
            const dummyInstansi = [
                'Dinas Pendidikan',
                'Dinas Kesehatan',
                'Dinas Pekerjaan Umum',
                'Dinas Perhubungan',
                'Dinas Sosial',
                'Badan Kepegawaian Daerah',
                'Dinas Tenaga Kerja',
                'Dinas Perindustrian dan Perdagangan'
            ];
            dummyInstansi.forEach(i => {
                $('#instansi').append(new Option(i, i));
            });
            // Add "Lainnya" option
            $('#instansi').append(new Option('Lainnya (Instansi tidak ada dalam daftar)', 'lainnya'));
        }

        // Handle Kab/Kota Selection
        $('#kabkota').on('change', function () {
            const kabkota = $(this).val();
            if (kabkota) {
                populateInstansi();
                $('#instansiSection').removeClass('hidden');
                $('#customInstansiSection, #unitKerjaSection').addClass('hidden');
            }
        });

        // Handle Instansi Selection
        $('#instansi').on('change', function () {
            const value = $(this).val();
            if (value === 'lainnya') {
                $('#customInstansiSection').removeClass('hidden');
                $('#unitKerjaSection').addClass('hidden');
            } else if (value) {
                $('#customInstansiSection').addClass('hidden');
                $('#unitKerjaSection').removeClass('hidden');
            } else {
                $('#customInstansiSection, #unitKerjaSection').addClass('hidden');
            }
        });

        // Handle Custom Instansi Input
        $('#customInstansi').on('input', function () {
            if ($(this).val().trim()) {
                $('#unitKerjaSection').removeClass('hidden');
            } else {
                $('#unitKerjaSection').addClass('hidden');
            }
        });

        // Form Submit
        $('#instansiForm').on('submit', function (e) {
            e.preventDefault();

            const asalInstansi = $('input[name="asalInstansi"]:checked').val();
            const unitKerja = $('#unitKerja').val().trim();

            if (!asalInstansi) {
                alert('Pilih asal instansi terlebih dahulu!');
                return;
            }

            if (!unitKerja) {
                alert('Unit Kerja harus diisi!');
                return;
            }

            if (asalInstansi === 'pusat') {
                const kementerian = $('#kementerian').val();
                if (!kementerian) {
                    alert('Pilih Kementerian/Lembaga!');
                    return;
                }
            } else if (asalInstansi === 'provinsi') {
                const provinsi = $('#provinsi').val();
                const instansi = $('#instansi').val();

                if (!provinsi) {
                    alert('Pilih Provinsi!');
                    return;
                }
                if (!instansi) {
                    alert('Pilih Instansi!');
                    return;
                }
                if (instansi === 'lainnya') {
                    const customInstansi = $('#customInstansi').val().trim();
                    if (!customInstansi) {
                        alert('Masukkan nama instansi!');
                        return;
                    }
                }
            } else if (asalInstansi === 'kabkota') {
                const provinsi = $('#provinsi').val();
                const kabkota = $('#kabkota').val();
                const instansi = $('#instansi').val();

                if (!provinsi) {
                    alert('Pilih Provinsi!');
                    return;
                }
                if (!kabkota) {
                    alert('Pilih Kabupaten/Kota!');
                    return;
                }
                if (!instansi) {
                    alert('Pilih Instansi!');
                    return;
                }
                if (instansi === 'lainnya') {
                    const customInstansi = $('#customInstansi').val().trim();
                    if (!customInstansi) {
                        alert('Masukkan nama instansi!');
                        return;
                    }
                }
            }

            // Redirect to index.html
            window.location.href = './index.html';
        });

        // Sidebar toggle with backdrop
        const sidebarToggleBtn = document.querySelector('[data-drawer-toggle="top-bar-sidebar"]');
        const sidebar = document.getElementById('top-bar-sidebar');

        // Create backdrop element
        const backdrop = document.createElement('div');
        backdrop.className = 'fixed inset-0 bg-gray-900 bg-opacity-50 z-30 hidden';
        backdrop.id = 'sidebar-backdrop';
        document.body.appendChild(backdrop);

        // Toggle sidebar and backdrop
        function toggleSidebar() {
            sidebar.classList.toggle('-translate-x-full');
            backdrop.classList.toggle('hidden');
        }

        sidebarToggleBtn?.addEventListener('click', function (e) {
            e.stopPropagation();
            toggleSidebar();
        });

        // Close sidebar when clicking backdrop
        backdrop.addEventListener('click', function () {
            toggleSidebar();
        });

        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function (event) {
            if (window.innerWidth < 640) {
                const isClickInsideSidebar = sidebar?.contains(event.target);
                const isClickOnToggleBtn = sidebarToggleBtn?.contains(event.target);

                if (sidebar && !isClickInsideSidebar && !isClickOnToggleBtn && !sidebar.classList.contains('-translate-x-full')) {
                    toggleSidebar();
                }
            }
        });

        // Toggle notification dropdown
        document.querySelector('[data-dropdown-toggle="dropdown-notifications"]')?.addEventListener('click', function (e) {
            e.stopPropagation();
            const notifDropdown = document.getElementById('dropdown-notifications');
            notifDropdown?.classList.toggle('hidden');
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', function (e) {
            const notifDropdown = document.getElementById('dropdown-notifications');
            const notifButton = document.querySelector('[data-dropdown-toggle="dropdown-notifications"]');

            if (notifButton && !notifButton.contains(e.target) && notifDropdown && !notifDropdown.contains(e.target)) {
                notifDropdown.classList.add('hidden');
            }
        });

    </script>
</body>

</html>